{% extends "base.html" %}
{% block title %}Invoice {{ invoice.invoice_number }}{% endblock %}
{% block content %}
<h1>Invoice {{ invoice.invoice_number }}</h1>

<p><strong>Employee:</strong> {{ invoice.employee|default:"—" }}</p>
<p class="muted">{{ invoice.client_email }}</p> 
<p><strong>Period:</strong> {{ invoice.period_start }} → {{ invoice.period_end }} ({{ invoice.get_period_type_display }})</p>
<p><strong>Issued:</strong> {{ invoice.date_issued }}</p>
<p><strong>Hourly rate:</strong> ${{ invoice.hourly_rate }}</p>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Weekday</th>
      <th>Hours</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    {% for e in invoice.work_entries.all %}
      <tr>
        <td>{{ e.work_date|date:"Y-m-d" }}</td>
        <td>{{ e.work_date|date:"l" }}</td>  {# "l" = Monday, Tuesday, ... #}
        <td>{{ e.hours }}</td>
        <td>{{ e.description }}</td>
      </tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr>
      <th colspan="2">Total hours</th>
      <th>{{ invoice.total_hours }}</th>
      <th></th>
    </tr>
    <tr>
      <th colspan="2">Total amount</th>
      <th>${{ invoice.total_amount }}</th>
      <th></th>
    </tr>
  </tfoot>
</table>
{% if invoice.notes %}
<p><strong>Notes:</strong> {{ invoice.notes }}</p>
{% endif %}
<p>
  <a class="btn" href="{% url 'invoice_pdf' invoice.pk %}">Download PDF</a>
</p>
{% endblock %}