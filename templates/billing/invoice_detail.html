{% extends "base.html" %}
{% block title %}Invoice {{ invoice.invoice_number }}{% endblock %}
{% block content %}
<h1>Invoice {{ invoice.invoice_number }}</h1>

<p><strong>Employee:</strong> {{ invoice.employee|default:"—" }}</p>
<p class="muted">{{ invoice.client_email }}</p> 
<p><strong>Period:</strong> {{ invoice.period_start }} → {{ invoice.period_end }} ({{ invoice.get_period_type_display }})</p>
<p><strong>Issued:</strong> {{ invoice.date_issued }}</p>
<p><strong>Hourly rate:</strong> ${{ invoice.hourly_rate }}</p>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Weekday</th>
      <th>Description</th>
      <th>Hours</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    {% for e in invoice.work_entries.all %}
      <tr>
        <td>{{ e.work_date|date:"Y-m-d" }}</td>
        <td>{{ e.work_date|date:"l" }}</td>  {# "l" = Monday, Tuesday, ... #}
        <td>{{ e.description }}</td>
        <td>{{ e.hours }}</td>
        <td class="right">${{ e.amount|floatformat:2 }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="5" class="muted">No work entries</td></tr>
    {% endfor %}
  </tbody>
<tfoot>
  <tr>
    <!-- Ocupa Date + Weekday -->
    <td colspan="3" class="right"><strong>Totals</strong></td>
    <!-- Bajo Hours -->
    <td class="right"><strong>{{ invoice.total_hours }}</strong></td>
    <!-- Bajo Amount -->
    <td class="right"><strong>${{ invoice.total_amount|floatformat:2 }}</strong></td>
    <!-- Bajo Description (vacío) -->
    <td></td>
  </tr>
</tfoot>
</table>
{% if invoice.notes %}
<p><strong>Notes:</strong> {{ invoice.notes }}</p>
{% endif %}
<p>
  <a class="btn" href="{% url 'invoice_pdf' invoice.pk %}">Download PDF</a>
</p>
{% endblock %}